''
'' Starlight Theme - Dark, color-blind–friendly
''
!$PUML_THEME = "starlight"
!$THEME      = "starlight"

'' User tunables with safe defaults
!if %not(%variable_exists("$PUML_BGCOLOR"))
  !$PUML_BGCOLOR = "#0E1116"
!endif
!if %not(%variable_exists("$PUML_MODE"))
  !$PUML_MODE = "dark"
!endif
!if %not(%variable_exists("$PUML_GRADIENT"))
  !$PUML_GRADIENT = 18
!endif

skinparam BackgroundColor $PUML_BGCOLOR
skinparam useBetaStyle false
skinparam shadowing false

' Hide circled type icons (C/I/E) in class-like diagrams for better dark-mode contrast
hide circle


'' Core palette (Okabe–Ito derived, dark-friendly)
!$BG        = "#0E1116"    '' main dark background if not transparent
!$SURFACE   = "#111827"    '' panels/cards
!$BORDER    = "#334155"    '' neutral border
!$TEXT      = "#E6EDF3"    '' primary text
!$TEXT_MUTE = "#B6C2CF"    '' secondary text

'' Accents (CVD-safe)
!$ACC_BLUE   = "#56B4E9"
!$ACC_ORANGE = "#E69F00"
!$ACC_GREEN  = "#009E73"
!$ACC_YELLOW = "#F0E442"
!$ACC_RED    = "#D55E00"
!$ACC_PURPLE = "#CC79A7"
!$ACC_GRAY   = "#999999"
!$ACC_CYAN   = "#00BFC4"

'' Semantic mappings
!$PRIMARY = $ACC_BLUE
!$INFO    = $ACC_CYAN
!$SUCCESS = $ACC_GREEN
!$WARNING = $ACC_YELLOW
!$DANGER  = $ACC_RED

'' Light/dark derivations (computed inline to maximize compatibility)

'' Default styles
skinparam defaultFontName "system-ui, Segoe UI, Roboto, Helvetica, Arial"
skinparam defaultFontSize 12
skinparam defaultFontColor $TEXT
skinparam dpi 100
skinparam LineColor $PRIMARY
skinparam ArrowColor $PRIMARY
skinparam RoundCorner 8
skinparam Padding 6

skinparam title {
  FontSize 20
  FontColor #E6EDF3
  BackgroundColor transparent
  BorderColor #56B4E9
  BorderRoundCorner 8
  BorderThickness 1
}

skinparam legend {
  BackgroundColor transparent
  BorderColor #334155
  FontColor #E6EDF3
}

skinparam note {
  BackgroundColor #111827
  BorderColor #334155
  FontColor #E6EDF3
}

skinparam stereotype {
  CBackgroundColor $SURFACE
  CBorderColor $BORDER
  ABackgroundColor $SUCCESS
  ABorderColor $SUCCESS
  IBackgroundColor $DANGER
  IBorderColor $DANGER
  EBackgroundColor $WARNING
  EBorderColor $WARNING
  NBackgroundColor $INFO
  NBorderColor $INFO
}

'' Procedures for accessible emphasis
!procedure $success($msg)
  <font color=$SUCCESS><b>$msg
!endprocedure
!procedure $failure($msg)
  <font color=$DANGER><b>$msg
!endprocedure
!procedure $warning($msg)
  <font color=$WARNING><b>$msg
!endprocedure
!procedure $emph($msg)
  <font color=$PRIMARY><b>★ $msg
!endprocedure

'' Sequence diagram tuning
!startsub sequence
skinparam sequence {
  TitleFontColor #E6EDF3
  BackgroundColor #0E1116
  BoxBackgroundColor #111827
  BoxBorderColor #334155
  BoxFontColor #E6EDF3
  GroupBackgroundColor #111827
  GroupBorderColor #334155
  GroupHeaderBackgroundColor #111827
  GroupHeaderFontColor #B6C2CF
  LifeLineBorderColor #334155
  LifeLineBackgroundColor #0E1116
  ArrowThickness 2
  ArrowColor #56B4E9
  DividerBackgroundColor #111827
  DividerBorderColor #334155
  DividerFontColor #B6C2CF
  ReferenceBackgroundColor #111827
  ReferenceBorderColor #334155
  ReferenceFontColor #E6EDF3
  ReferenceHeaderBackgroundColor #111827
  ReferenceHeaderFontColor #B6C2CF
  ActorBorderColor #56B4E9
  ActorFontColor #E6EDF3
  ParticipantBackgroundColor #111827
  ParticipantBorderColor #56B4E9
  ParticipantFontColor #E6EDF3
}

!endsub

!startsub participant
skinparam participant {
  BackgroundColor #111827
  BorderColor #56B4E9
  FontColor #E6EDF3
  ParticipantBorderThickness 2
}
!endsub

!startsub actor
skinparam actor {
  BackgroundColor transparent
  BorderColor #56B4E9
  FontColor #56B4E9
}
!endsub

!startsub arrow
skinparam arrow {
  Thickness 2
  Color $PRIMARY
  FontColor $TEXT
}
!endsub

'' Use Case
!startsub usecase
skinparam usecase {
  BackgroundColor #111827
  BorderColor #56B4E9
  FontColor #E6EDF3
  BorderThickness 2
}
!endsub

'' Class
!startsub class
skinparam class {
  BackgroundColor #111827
  HeaderBackgroundColor #56B4E9-#111827
  BorderColor #334155
  FontColor #E6EDF3
  AttributeFontColor #E6EDF3
  StereotypeFontColor #B6C2CF
  ClassAttributeIconSize 0
}
!endsub

'' Activity
!startsub activity
skinparam activity {
  BackgroundColor #111827
  BorderColor #334155
  FontColor #E6EDF3
  BarColor #56B4E9
  StartColor #56B4E9
  EndColor #56B4E9
  DiamondBackgroundColor #111827
  DiamondBorderColor #334155
  DiamondFontColor #E6EDF3
  ActivityStartColor #56B4E9
  ActivityEndColor #56B4E9
  ActivityBackgroundColor #111827
}
!endsub

'' Component
!startsub component
skinparam component {
  BackgroundColor #111827
  BorderColor #56B4E9
  FontColor #E6EDF3
}
!endsub

'' State
!startsub state
skinparam state {
  BackgroundColor #111827
  BorderColor #334155
  FontColor #E6EDF3
  StartColor #56B4E9
  EndColor #56B4E9
}
!endsub

'' Object
!startsub object
skinparam object {
  BackgroundColor #111827
  BorderColor #334155
  FontColor #E6EDF3
  AttributeFontColor #E6EDF3
}
!endsub

'' Deployment
!startsub node
skinparam node {
  BackgroundColor #111827
  BorderColor #334155
  FontColor #E6EDF3
}
!endsub

!startsub database
skinparam database {
  BackgroundColor #111827
  BorderColor #334155
  FontColor #E6EDF3
}
!endsub

!startsub artifact
skinparam artifact {
  BackgroundColor #111827
  BorderColor #334155
  FontColor #E6EDF3
}
!endsub

'' Timing
!startsub timing
skinparam timing {
  BackgroundColor #0E1116
  LineColor #56B4E9
  FontColor #E6EDF3
  SeparatorColor #334155
  TimeFontColor #B6C2CF
}
!endsub

<style>
timingDiagram {
  state {
    BackGroundColor #0E1116
    LineColor #334155
    FontColor #E6EDF3
  }
  concise {
    BackGroundColor #0E1116
    LineColor #334155
    FontColor #E6EDF3
  }
  scale { FontColor #B6C2CF }
  timeHeader { FontColor #B6C2CF }
}
</style>

'' Frames, packages, etc.
!startsub package
skinparam package {
  BackgroundColor #0E1116
  BorderColor #56B4E9
  FontColor #B6C2CF
}
!endsub

!startsub frame
skinparam frame {
  BackgroundColor #111827
  BorderColor #56B4E9
  FontColor #E6EDF3
}
!endsub

!startsub rectangle
skinparam rectangle {
  BackgroundColor #111827
  BorderColor #56B4E9
  FontColor #E6EDF3
}
!endsub

'' If background is transparent, assume dark (works with dark editors)
!if ($PUML_MODE == "dark")
  !assume transparent dark
!else
  !assume transparent light
!endif

